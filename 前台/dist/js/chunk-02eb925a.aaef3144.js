(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02eb925a"],{"63bd":function(t,e,n){"use strict";var s=n("9a38"),r=n.n(s);r.a},6575:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Card",[n("DatePicker",{staticStyle:{width:"140px","margin-bottom":"15px"},attrs:{value:t.curYear,format:"yyyy年",type:"year",placeholder:"年份"},on:{"on-change":t.changeYear}}),n("Tabs",{attrs:{type:"card",value:t.curMonth},on:{"on-click":t.changeMonth}},[t._l(12,(function(t){return[n("TabPane",{key:t,attrs:{label:t+"月",name:t.toString()}})]}))],2),n("Table",{ref:"table",attrs:{border:"",columns:t.columns,data:t.tempList,stripe:"",loading:t.loading},scopedSlots:t._u([{key:"systemName",fn:function(e){var s=e.row;return[n("strong",[t._v(t._s(s.systemName))])]}},t._l(t.curMonthDays,(function(e){return{key:e,fn:function(s){var r=s.row,a=s.index;return[t.editIndex===a?n("Input",{key:"day-"+e,attrs:{placeholder:e.toString(),type:"text",number:""},model:{value:r[e],callback:function(n){t.$set(r,e,n)},expression:"row[day]"}}):n("span",{key:"day2-"+e},[t._v(t._s(r[e]?r[e]:"-"))])]}}})),{key:"action",fn:function(e){var s=e.row,r=e.index;return[t.editIndex===r?n("div",[n("Button",{attrs:{type:"primary",ghost:"",size:"small"},on:{click:function(e){return t.handleSave(s,r)}}},[t._v("保存")])],1):n("div",[n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleEdit(s,r)}}},[t._v("编辑")])],1)]}}],null,!0)}),n("div",{staticStyle:{"margin-top":"20px"}},[n("Button",{attrs:{type:"primary"},on:{click:function(e){return t.exportData(1)}}},[t._v("导出数据")])],1)],1)},r=[],a=n("365c");n("82c6");function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o={data:function(){return{curYear:(new Date).getFullYear()+"",columns:[],exportColumns:[],editIndex:-1,workList:[],loading:!1,curMonth:((new Date).getMonth()+1).toString(),curMonthDays:0}},computed:{tempList:function(){for(var t=[],e=0;e<this.workList.length;e++){for(var n={systemName:this.workList[e].systemName,systemId:this.workList[e].systemId},s=0;s<this.workList[e].timeList.length;s++)n=Object.assign(n,i({},this.workList[e].timeList[s].day,this.workList[e].timeList[s].duration));t.push(n)}return t}},methods:{handleEdit:function(t,e){this.editIndex=e},handleSave:function(t,e){for(var n=this,s=[],r=1;r<=this.curMonthDays;r++)"undefined"!==typeof t[r]&&(""==t[r]&&(t[r]=0),s.push({systemId:t.systemId,systemName:t.systemName,userId:JSON.parse(localStorage.getItem("userInfo")).userId,userName:JSON.parse(localStorage.getItem("userInfo")).userName,year:parseInt(this.curYear),month:parseInt(this.curMonth),day:r,time:t[r]}));this.editIndex=-1,Object(a["B"])({systemId:t.systemId,systemName:t.systemName,userId:JSON.parse(localStorage.getItem("userInfo")).userId,userName:JSON.parse(localStorage.getItem("userInfo")).userName,year:parseInt(this.curYear),month:parseInt(this.curMonth),data:JSON.stringify(s)}).then((function(t){1===t.code?n.$Message.success("保存成功"):n.$Message.err("保存失败")}))},exportData:function(t){1===t?this.$refs.exportTable.exportCsv({filename:this.curYear+"年"+this.curMonth+"月工时统计（"+JSON.parse(localStorage.getItem("userInfo")).nickName+"）"}):this.$refs.exportTable.exportCsv({filename:this.curYear+"年"+this.curMonth+"月工时统计（"+JSON.parse(localStorage.getItem("userInfo")).nickName+"）",original:!1})},remove:function(t){this.data.splice(t,1)},changeMonth:function(t){this.curMonth=t,this.changeDate(),this.initList()},changeYear:function(t,e){this.curYear=t,this.changeDate(),this.initList()},readerTable:function(t){this.curMonthDays=t,this.columns=[],this.exportColumns=[],this.columns.push({title:"系统/时间(h)",width:150,fixed:"left",sortable:!0,slot:"systemName"}),this.exportColumns.push({title:"系统/时间(h)",width:150,fixed:"left",slot:"systemName"});for(var e=1;e<=t;e++)this.columns.push({title:e,slot:e,width:55,sortable:!0,align:"center"}),this.exportColumns.push({title:e,slot:e,width:50,sortable:!0,align:"center"});this.columns.push({title:"操作",width:80,align:"center",fixed:"right",slot:"action"})},changeDate:function(){var t=new Date(this.curYear+"-"+this.curMonth),e=t.getFullYear(),n=t.getMonth()+1,s=new Date(e,n,0),r=s.getDate();this.readerTable(r)},mGetDate:function(){var t=new Date,e=t.getFullYear(),n=t.getMonth()+1,s=new Date(e,n,0),r=s.getDate();this.readerTable(r)},initList:function(){var t=this,e={year:parseInt(this.curYear),month:parseInt(this.curMonth),userId:JSON.parse(localStorage.getItem("userInfo")).userId};this.loading=!0,Object(a["s"])(e).then((function(e){t.loading=!1,1===e.code?(t.workList=e.data,t.$Message.success("查询成功")):t.$Message.error("查询失败")}))},edit:function(t){}},mounted:function(){this.mGetDate(),this.initList()}},u=o,c=(n("63bd"),n("4e82")),l=Object(c["a"])(u,s,r,!1,null,null,null);e["default"]=l.exports},"9a38":function(t,e,n){}}]);