(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16056ab9"],{"63bd":function(t,e,s){"use strict";s("910d")},6575:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",[s("DatePicker",{staticStyle:{width:"140px","margin-bottom":"15px"},attrs:{value:t.curYear,format:"yyyy年",type:"year",placeholder:"年份"},on:{"on-change":t.changeYear}}),s("Tabs",{attrs:{type:"card",value:t.curMonth},on:{"on-click":t.changeMonth}},[t._l(12,(function(t){return[s("TabPane",{key:t,staticStyle:{"min-height":"auto"},attrs:{label:t+"月",name:t.toString()}})]}))],2),s("Table",{ref:"table",attrs:{border:"",columns:t.columns,data:t.tempList,stripe:"",loading:t.loading},scopedSlots:t._u([{key:"systemName",fn:function(e){var n=e.row;return[s("strong",[t._v(t._s(n.systemName))])]}},t._l(t.curMonthDays,(function(e){return{key:e,fn:function(n){var a=n.row,r=n.index;return[t.editIndex===r?s("Input",{key:"day-"+e,attrs:{placeholder:e.toString(),type:"text",number:""},model:{value:a[e],callback:function(s){t.$set(a,e,s)},expression:"row[day]"}}):s("span",{key:"day2-"+e},[t._v(t._s(a[e]?a[e]:"-"))])]}}})),{key:"action",fn:function(e){var n=e.row,a=e.index;return[t.editIndex===a?s("div",[s("Button",{attrs:{type:"primary",ghost:"",size:"small"},on:{click:function(e){return t.handleSave(n,a)}}},[t._v("保存")])],1):s("div",[s("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleEdit(n,a)}}},[t._v("编辑")])],1)]}}],null,!0)})],1)},a=[],r=s("365c");function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var o={data:function(){return{curYear:(new Date).getFullYear()+"",columns:[],exportColumns:[],editIndex:-1,workList:[],loading:!1,curMonth:((new Date).getMonth()+1).toString(),curMonthDays:0}},computed:{tempList:function(){for(var t=[],e=0;e<this.workList.length;e++){for(var s={systemName:this.workList[e].systemName,systemId:this.workList[e].systemId},n=0;n<this.workList[e].timeList.length;n++)s=Object.assign(s,i({},this.workList[e].timeList[n].day,this.workList[e].timeList[n].duration));t.push(s)}return t}},methods:{handleEdit:function(t,e){this.editIndex=e},handleSave:function(t,e){for(var s=this,n=[],a=1;a<=this.curMonthDays;a++)"undefined"!==typeof t[a]&&(""==t[a]&&(t[a]=0),n.push({systemId:t.systemId,systemName:t.systemName,userId:JSON.parse(localStorage.getItem("userInfo")).userId,userName:JSON.parse(localStorage.getItem("userInfo")).userName,year:parseInt(this.curYear),month:parseInt(this.curMonth),day:a,time:t[a]}));this.editIndex=-1,Object(r["gb"])({systemId:t.systemId,systemName:t.systemName,userId:JSON.parse(localStorage.getItem("userInfo")).userId,userName:JSON.parse(localStorage.getItem("userInfo")).userName,year:parseInt(this.curYear),month:parseInt(this.curMonth),data:JSON.stringify(n)}).then((function(t){1===t.code?s.$Message.success("保存成功"):s.$Message.err("保存失败")}))},remove:function(t){this.data.splice(t,1)},changeMonth:function(t){this.curMonth=t,this.changeDate(),this.initList()},changeYear:function(t,e){this.curYear=t.slice(0,4),this.changeDate(),this.initList()},readerTable:function(t){this.curMonthDays=t,this.columns=[],this.exportColumns=[],this.columns.push({title:"系统/时间(h)",width:150,fixed:"left",sortable:!0,slot:"systemName"}),this.exportColumns.push({title:"系统/时间(h)",width:150,fixed:"left",slot:"systemName"});for(var e=1;e<=t;e++)this.columns.push({title:e,slot:e,width:55,sortable:!0,align:"center"}),this.exportColumns.push({title:e,slot:e,width:50,sortable:!0,align:"center"});this.columns.push({title:"操作",width:80,align:"center",fixed:"right",slot:"action"})},changeDate:function(){var t=new Date(this.curYear+"-"+this.curMonth),e=t.getFullYear(),s=t.getMonth()+1,n=new Date(e,s,0),a=n.getDate();this.readerTable(a)},mGetDate:function(){var t=new Date,e=t.getFullYear(),s=t.getMonth()+1,n=new Date(e,s,0),a=n.getDate();this.readerTable(a)},initList:function(){var t=this,e={year:parseInt(this.curYear),month:parseInt(this.curMonth),userId:JSON.parse(localStorage.getItem("userInfo")).userId};this.loading=!0,Object(r["P"])(e).then((function(e){t.loading=!1,1===e.code?(t.workList=e.data,t.$Message.success("查询成功")):t.$Message.error("查询失败")}))},edit:function(t){}},mounted:function(){this.mGetDate(),this.initList()}},u=o,c=(s("63bd"),s("cba8")),l=Object(c["a"])(u,n,a,!1,null,null,null);e["default"]=l.exports},"910d":function(t,e,s){}}]);