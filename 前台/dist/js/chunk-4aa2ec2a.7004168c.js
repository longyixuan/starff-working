(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4aa2ec2a"],{"06f1":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Card",{attrs:{title:"各系统模块管理"}},["admin"==t.isReset?s("div",{staticStyle:{"text-align":"right","margin-bottom":"20px"}},[s("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"warning"},on:{click:t.refresh}},[t._v("更新工作总结旧数据")]),s("Button",{attrs:{type:"primary"},on:{click:t.mergeModal}},[t._v("合并模块")])],1):t._e(),s("Alert",{attrs:{type:"warning","show-icon":""}},[t._v("点击模块名称可修改模块名称")]),s("Table",{attrs:{border:"",columns:t.columns,data:t.sysList},scopedSlots:t._u([{key:"modal",fn:function(e){var o=e.row;return t._l(t.filterModal(o.id),(function(e){return s("Tag",{key:e.modelId,staticStyle:{cursor:"pointer"},attrs:{type:"border",closable:"",name:e.modelId+"|"+o.id},on:{"on-close":t.deleteModal},nativeOn:{click:function(s){return t.editModal(o.id,e)}}},[t._v(t._s(e.modelName))])}))}},{key:"action",fn:function(e){var o=e.row;return[s("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updateModal(o.id)}}},[t._v("添加")])]}}])}),s("Modal",{attrs:{title:"编辑模块"},on:{"on-ok":t.add},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("Form",{attrs:{"label-width":80}},[s("FormItem",{attrs:{label:"系统名称"}},[s("Select",{attrs:{placeholder:"选择系统",disabled:"",filterable:""},model:{value:t.systemId,callback:function(e){t.systemId=e},expression:"systemId"}},t._l(t.sysList,(function(e){return s("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.title))])})),1)],1),s("FormItem",{attrs:{label:"模块名称"}},[s("Input",{attrs:{placeholder:"填写模块名称"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)],1)],1)],1)},i=[],n=s("365c"),a={data:function(){return{modal:!1,isReset:JSON.parse(localStorage.getItem("userInfo")).userName,sysList:[],systemId:"",model:"",modelId:"",modelList:[],columns:[{type:"index",width:80,align:"center"},{title:"系统名称",key:"title",width:300},{title:"模块",slot:"modal"},{title:"操作",slot:"action",width:100,align:"center"}]}},methods:{mergeModal:function(){this.$router.push({path:"/sys-modal-merge"})},refresh:function(){var t=this;Object(n["hb"])().then((function(e){1===e.code&&t.$Message.success("数据更新成功")}))},filterModal:function(t){return _.filter(this.modelList,["systemId",t])},updateModal:function(t){this.systemId=t,this.modal=!0},editModal:function(t,e){this.systemId=t,this.modelId=e.modelId,this.model=e.modelName,this.modal=!0},deleteModal:function(t,e){var s=this;Object(n["r"])({id:e.split("|")[0],sysId:e.split("|")[1]}).then((function(t){1===t.code?(s.$Message.success("删除成功"),s.init()):s.$Message.error(t.msg)}))},add:function(){var t=this;this.modelId?this.edit():Object(n["d"])({systemId:this.systemId,modelName:this.model}).then((function(e){1===e.code?(t.modal=!1,t.$Message.success("添加成功"),t.init()):t.$Message.error(e.msg)}))},init:function(){var t=this;Object(n["Y"])().then((function(e){t.modelList=e.data}))},edit:function(){var t=this;Object(n["xb"])({systemId:this.systemId,modelName:this.model,id:this.modelId}).then((function(e){t.modal=!1,t.$Message.success("修改成功")}))}},mounted:function(){var t=this;Object(n["Y"])().then((function(e){t.modelList=e.data,Object(n["L"])().then((function(e){t.sysList=e.data}))}))}},l=a,d=(s("d127"),s("cba8")),r=Object(d["a"])(l,o,i,!1,null,null,null);e["default"]=r.exports},"0c0a":function(t,e,s){},d127:function(t,e,s){"use strict";s("0c0a")}}]);