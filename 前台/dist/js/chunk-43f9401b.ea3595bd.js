(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43f9401b"],{"154f":function(t,e,i){"use strict";i("7bca")},5721:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",{attrs:{title:"工作总结"}},[i("div",{staticStyle:{padding:"0 20px"}},[i("div",{staticClass:"summary-view-label"},[t._v("\n            "+t._s(t.title)+"\n            "),i("Input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{type:"text",placeholder:"输入关键字筛选"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),i("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.init}},[t._v("筛选")])],1),i("div",{staticClass:"summary-view-warp"},[t._l(t.submitList,(function(e,r){return[i("h2",{staticClass:"summary-view-h2"},[t._v(t._s(t.toChinesNum(r+1))+"、"+t._s(e.systemName))]),i("table",{staticClass:"summary-table"},[i("thead",[i("tr",[i("th",{attrs:{width:"180"}},[t._v("模块")]),i("th",[t._v("工作内容")]),"day"==t.$route.query.type?i("th",{attrs:{width:"120"}},[t._v("日期")]):t._e(),"week"==t.$route.query.type?i("th",{attrs:{width:"270"}},[t._v("日期")]):t._e(),t.$route.query.admin?i("th",{attrs:{width:"100"}},[t._v("姓名")]):t._e()])]),i("tbody",[t._l(e.content,(function(e,r,a){return[t._l(e,(function(a,s){return[i("tr",0==s?[i("td",{attrs:{rowspan:e.length},domProps:{innerHTML:t._s(t.linght(t.filterTitle(r)))}}),i("td",[i("div",{staticStyle:{"white-space":"pre-line","word-break":"break-all"},domProps:{innerHTML:t._s(t.linght(a.contentDescription))}})]),"day"==t.$route.query.type||"week"==t.$route.query.type?i("td",["day"==t.$route.query.type?[t._v("\n                                            "+t._s(a.year+"-"+a.month+"-"+a.day)+"\n                                        ")]:t._e(),"week"==t.$route.query.type?[t._v("\n                                            "+t._s(t._f("timeFilter")(a.startDay))+" - "+t._s(t._f("timeFilter")(a.endDay))+"\n                                        ")]:t._e()],2):t._e(),t.$route.query.admin?i("td",[t._v(t._s(a.nickName))]):t._e()]:[i("td",[i("div",{staticStyle:{"white-space":"pre-line","word-break":"break-all"},domProps:{innerHTML:t._s(t.linght(a.contentDescription))}})]),"day"==t.$route.query.type||"week"==t.$route.query.type?i("td",["day"==t.$route.query.type?[t._v("\n                                            "+t._s(a.year+"-"+a.month+"-"+a.day)+"\n                                        ")]:t._e(),"week"==t.$route.query.type?[t._v("\n                                            "+t._s(t._f("timeFilter")(a.startDay))+" - "+t._s(t._f("timeFilter")(a.endDay))+"\n                                        ")]:t._e()],2):t._e(),t.$route.query.admin?i("td",[t._v(t._s(a.nickName))]):t._e()])]}))]}))],2)])]})),i("h2",{staticClass:"summary-view-h2"},[t._v("工作计划")]),i("Tabs",{attrs:{type:"card"}},[i("TabPane",{attrs:{label:"按人查看"}},[i("table",{staticClass:"summary-table"},[i("thead",[i("tr",[i("th",{attrs:{width:"180"}},[t._v("系统")]),i("th",[t._v("工作计划内容")]),t.$route.query.admin?i("th",{attrs:{width:"100"}},[t._v("姓名")]):t._e()])]),t.$route.query.admin?i("tbody",[t._l(t.gzjhList,(function(e){return t._l(e.details,(function(r,a){return i("tr",[0==a?[i("td",[t._v(t._s(r.systemName))]),i("td",[i("div",{staticStyle:{"white-space":"pre-line","word-break":"break-all"},domProps:{innerHTML:t._s(t.linght(r.gzjh))}})]),i("td",{attrs:{rowspan:e.details.length}},[t._v(t._s(r.nickName))])]:[i("td",[t._v(t._s(r.systemName))]),i("td",[i("div",{staticStyle:{"white-space":"pre-line","word-break":"break-all"},domProps:{innerHTML:t._s(t.linght(r.gzjh))}})])]],2)}))}))],2):i("tbody",[t._l(t.gzjhList,(function(e){return t._l(e.details,(function(e,r){return i("tr",[i("td",[t._v(t._s(e.systemName))]),i("td",[i("div",{staticStyle:{"white-space":"pre-line","word-break":"break-all"},domProps:{innerHTML:t._s(t.linght(e.gzjh))}})])])}))}))],2)])]),i("TabPane",{attrs:{label:"按系统查看"}},[i("table",{staticClass:"summary-table"},[i("thead",[i("tr",[i("th",{attrs:{width:"180"}},[t._v("系统")]),i("th",[t._v("工作计划内容")]),t.$route.query.admin?i("th",{attrs:{width:"100"}},[t._v("姓名")]):t._e()])]),t.$route.query.admin?i("tbody",[t._l(t.gzjhList2,(function(e){return t._l(e.details,(function(r,a){return i("tr",[0==a?[i("td",{attrs:{rowspan:e.details.length}},[t._v(t._s(r.systemName))]),i("td",[i("div",{staticStyle:{"white-space":"pre-line","word-break":"break-all"},domProps:{innerHTML:t._s(t.linght(r.gzjh))}})]),i("td",[t._v(t._s(r.nickName))])]:[i("td",[i("div",{staticStyle:{"white-space":"pre-line","word-break":"break-all"},domProps:{innerHTML:t._s(t.linght(r.gzjh))}})]),i("td",[t._v(t._s(r.nickName))])]],2)}))}))],2):i("tbody",[t._l(t.gzjhList,(function(e){return t._l(e.details,(function(e,r){return i("tr",[i("td",[t._v(t._s(e.systemName))]),i("td",[i("div",{staticStyle:{"white-space":"pre-line","word-break":"break-all"},domProps:{innerHTML:t._s(t.linght(e.gzjh))}})])])}))}))],2)])])],1)],2),i("div",{staticClass:"summary-view-line"}),i("div",{staticStyle:{"text-align":"center"}},[i("Button",{attrs:{type:"primary",ghost:""},on:{click:function(e){t.modal=!0}}},[t._v("生成markdown文件")]),i("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",disabled:t.disabled},on:{click:function(e){return t.download(t.doctitle)}}},[t._v("下载")])],1)]),i("Modal",{attrs:{title:"生成markdown文件"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[i("Input",{attrs:{type:"text",placeholder:"文件标题"},model:{value:t.doctitle,callback:function(e){t.doctitle=e},expression:"doctitle"}}),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:function(e){t.modal=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary"},on:{click:t.onOk}},[t._v("确定")])],1)],1)],1)},a=[],s=i("365c"),n=i("caaf"),o=i.n(n),l={data:function(){return{templateId:this.$route.query.id,modalWeek:!1,title:"",keyword:"",time:"",type:0,modal:!1,disabled:!0,doctitle:"",submitList:[],gzjhList:[],gzjhList2:[]}},filters:{timeFilter:function(t){return o()(t).format("YYYY年MM月DD日")}},methods:{filterTitle:function(t){return _.find(this.modelList,["modelId",t]).modelName},linght:function(t){if(this.keyword.length>0){var e=this.keyword.split("");return t+="",e.forEach((function(e){-1!==t.indexOf(e)&&""!==e&&(t=t.replace(new RegExp(e,"g"),'<font color="#f75353">'+e+"</font>"))})),t}return t},onOk:function(){var t=this,e={nickName:JSON.parse(localStorage.getItem("userInfo")).nickName,userId:JSON.parse(localStorage.getItem("userInfo")).userId,time:o()().format("YYYY-MM-DD"),doctitle:this.doctitle,list:JSON.stringify(this.submitList),gzjh:JSON.stringify(this.gzjhList)};console.log(this.submitList),Object(s["x"])(e).then((function(e){1===e.code&&(t.modal=!1,t.$Message.success("生成成功"),t.disabled=!1)}))},download:function(t){window.location.href="http://172.16.2.131:3333/download/markdown?fileName="+t},init:function(){var t=this;Object(s["cb"])(this.$route.query.type,{mergeList:JSON.stringify(this.$route.query.mergeList),keyword:this.keyword}).then((function(e){if(1==e.code){if(t.$Message.success("查询成功"),e.data.length>0){t.title="工作总结汇总",t.submitList=[];for(var i=0;i<e.data.length;i++)t.submitList.push({systemId:e.data[i]._id.systemId,systemName:e.data[i]._id.systemName,content:_.groupBy(e.data[i].details,"contentTitle")})}t.gzjhList=e.gzjh,t.gzjhList2=e.gzjh2}}))},toChinesNum:function(t){var e=["零","一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","二十一","二十二","二十三","二十四","二十五","二十六","二十七","二十八","二十九","三十","三十一","三十二","三十三","三十四","三十五","三十六","三十七","三十八","三十九","四十","四十一","四十二","四十三","四十四","四十五","四十六","四十七","四十八","四十九","五十","五十一","五十二","五十三","五十四","五十五","五十六","五十七","五十八","五十九","六十","六十一","六十二","六十三","六十四","六十五","六十六","六十七","六十八","六十九","七十","七十一","七十二","七十三","七十四","七十五","七十六","七十七","七十八","七十九","八十"];return e[t]}},mounted:function(){var t=this;Object(s["Y"])().then((function(e){t.modelList=e.data,t.init()})),this.type=JSON.parse(localStorage.getItem("userInfo")).type}},d=l,u=(i("154f"),i("cba8")),c=Object(u["a"])(d,r,a,!1,null,null,null);e["default"]=c.exports},"7bca":function(t,e,i){}}]);