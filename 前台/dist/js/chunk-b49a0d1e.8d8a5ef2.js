(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b49a0d1e"],{4265:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"own-space"},[s("Card",[s("Form",{ref:"userForm",attrs:{model:e.userForm,"label-width":100,"label-position":"right"}},[s("FormItem",{attrs:{label:"用户账号："}},[s("span",[e._v(e._s(e.userForm.userName))])]),s("FormItem",{attrs:{label:"用户姓名："}},[s("Input",{staticStyle:{width:"200px"},model:{value:e.userForm.nickName,callback:function(t){e.$set(e.userForm,"nickName",t)},expression:"userForm.nickName"}})],1),s("FormItem",{attrs:{label:"邮箱："}},[s("Input",{staticStyle:{width:"200px"},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),s("FormItem",{attrs:{label:"负责的系统："}},[e._l(e.SystemList,(function(t){return[s("Tag",{directives:[{name:"show",rawName:"v-show",value:e.userForm.systems.includes(t.id),expression:"userForm.systems.includes(item.id)"}],key:t.id,attrs:{type:"border",color:"default"}},[e._v(e._s(t.title))])]})),s("Button",{attrs:{type:"primary",size:"small"},on:{click:e.editSystems}},[e._v("编辑")])],2),s("FormItem",{attrs:{label:"所属部门："}},[s("span",[e._v(e._s(e.userForm.departmentTitle))])]),s("FormItem",{attrs:{label:"创建时间："}},[s("span",[e._v(e._s(e._f("timeFormat")(e.userForm.createdAt)))])]),s("FormItem",[s("Button",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{type:"primary",loading:e.saveLoading},on:{click:e.saveEdit}},[e._v("保存")])],1)],1)],1),s("Modal",{staticClass:"systemModal",attrs:{title:"选择负责的系统","mask-closable":!1,width:500,styles:{top:"30px"}},model:{value:e.systemModalVisible,callback:function(t){e.systemModalVisible=t},expression:"systemModalVisible"}},[s("Tree",{ref:"sysTree",attrs:{"empty-text":"请联系管理员录入系统列表",data:e.systemData,"show-checkbox":"","check-directly":"",multiple:""}}),e.treeLoading?s("Spin",{attrs:{size:"large"}}):e._e(),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("Button",{attrs:{type:"text"},on:{click:e.cancelsystemEdit}},[e._v("取消")]),s("Button",{attrs:{type:"primary"},on:{click:e.submitsystemEdit}},[e._v("确定")])],1)],1)],1)},r=[],i=s("caaf"),o=s.n(i),n=s("365c"),l={name:"ownspace_index",data:function(){return{accessToken:{},userForm:{userId:"",userName:"",nickName:"",email:"",status:"",departmentTitle:"",createdAt:"",systems:[]},defaultList:[{url:""}],SystemList:[],uploadList:[],viewImage:!1,imgUrl:"",saveLoading:!1,systemModalVisible:!1,treeLoading:!1,systemData:[],editSystem:[],selectAllFlag:!1}},filters:{timeFormat:function(e){return o()(e).format("YYYY年MM月DD日")}},methods:{init:function(){this.accessToken={accessToken:this.getStore("accessToken")};var e=JSON.parse(localStorage.getItem("userInfo"));for(var t in e)null===e[t]&&arr.constructor!=Array&&(e[t]="");var s=JSON.stringify(e),a=JSON.parse(s);this.userForm=a,this.getSystemList()},getSystemList:function(){var e=this;Object(n["L"])().then((function(t){1===t.code&&(e.SystemList=t.data)}))},saveEdit:function(){var e=this;this.saveLoading=!0;var t=this.userForm;Object(n["Ab"])(t).then((function(t){e.saveLoading=!1,1===t.code?(e.$Message.success("保存成功"),e.setStore("userInfo",e.userForm)):e.$Message.error("保存失败")}))},editSystems:function(){var e=this;this.treeLoading=!0,Object(n["M"])().then((function(t){if(e.treeLoading=!1,1===t.code){for(var s=0;s<t.data.length;s++)for(var a=0;a<t.data[s].children.length;a++)e.userForm.systems.includes(t.data[s].children[a].id)?e.$set(t.data[s].children[a],"checked",!0):e.$set(t.data[s].children[a],"checked",!1);e.systemData=t.data,e.systemModalVisible=!0}}))},cancelsystemEdit:function(){this.systemModalVisible=!1},submitsystemEdit:function(){var e=[],t=this.$refs.sysTree.getCheckedNodes();t.forEach((function(t){e.push(t.id)})),this.userForm.systems=e,this.systemModalVisible=!1}},mounted:function(){this.init()}},c=l,m=(s("9c99"),s("cba8")),d=Object(m["a"])(c,a,r,!1,null,null,null);t["default"]=d.exports},"9c99":function(e,t,s){"use strict";s("cc3b")},cc3b:function(e,t,s){}}]);