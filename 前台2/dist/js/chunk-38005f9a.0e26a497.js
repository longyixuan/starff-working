(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38005f9a"],{"08f3":function(e,t,n){},"13ca":function(e,t,n){},"365c":function(e,t,n){"use strict";n.d(t,"B",function(){return a}),n.d(t,"w",function(){return i}),n.d(t,"C",function(){return s}),n.d(t,"y",function(){return o}),n.d(t,"D",function(){return c}),n.d(t,"s",function(){return l}),n.d(t,"u",function(){return u}),n.d(t,"q",function(){return d}),n.d(t,"a",function(){return h}),n.d(t,"g",function(){return m}),n.d(t,"c",function(){return p}),n.d(t,"z",function(){return f}),n.d(t,"r",function(){return g}),n.d(t,"k",function(){return b}),n.d(t,"i",function(){return y}),n.d(t,"j",function(){return v}),n.d(t,"f",function(){return F}),n.d(t,"e",function(){return O}),n.d(t,"t",function(){return D}),n.d(t,"v",function(){return w}),n.d(t,"b",function(){return j}),n.d(t,"h",function(){return k}),n.d(t,"d",function(){return L}),n.d(t,"A",function(){return S}),n.d(t,"o",function(){return I}),n.d(t,"n",function(){return T}),n.d(t,"p",function(){return x}),n.d(t,"x",function(){return $}),n.d(t,"l",function(){return N}),n.d(t,"m",function(){return C});var r=n("7f80"),a="/upload/file",i=function(e){return Object(r["c"])("/login",e)},s=function(e){return Object(r["b"])("/user/info",e)},o=function(e){return Object(r["c"])("/regist",e)},c=function(e){return Object(r["c"])("/user/edit",e)},l=function(e){return Object(r["b"])("/department/getByParentId/0",e)},u=function(e,t){return Object(r["b"])("/department/getByParentId/".concat(e),t)},d=function(e,t){return Object(r["b"])("/user/getByDepartmentId/".concat(e),t)},h=function(e){return Object(r["c"])("/department/add",e)},m=function(e){return Object(r["c"])("/department/edit",e)},p=function(e,t){return Object(r["a"])("/department/delByIds/".concat(e),t)},f=function(e){return Object(r["b"])("/department/search",e)},g=function(e){return Object(r["b"])("/user/getByCondition",e)},b=function(e){return Object(r["b"])("/user/getAllUser",e)},y=function(e){return Object(r["c"])("/user/admin/edit",e)},v=function(e,t){return Object(r["c"])("/user/admin/enable/".concat(e),t)},F=function(e,t){return Object(r["c"])("/user/admin/disable/".concat(e),t)},O=function(e,t){return Object(r["a"])("/user/delByIds/".concat(e),t)},D=function(e){return Object(r["b"])("/system/getByParentId/0",e)},w=function(e,t){return Object(r["b"])("/system/getByParentId/".concat(e),t)},j=function(e){return Object(r["c"])("/system/add",e)},k=function(e){return Object(r["c"])("/system/edit",e)},L=function(e,t){return Object(r["a"])("/system/delByIds/".concat(e),t)},S=function(e){return Object(r["b"])("/system/search",e)},I=function(e){return Object(r["b"])("/system/getAllList",e)},T=function(e){return Object(r["b"])("/user/userSystem",e)},x=function(e){return Object(r["c"])("/time/getTimeList",e)},$=function(e){return Object(r["c"])("/time/postTime",e)},N=function(e){return Object(r["c"])("/time/workTimeSeach",e)},C=function(e){return Object(r["c"])("/time/getMapTime",e)}},4320:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search"},[n("Row",[n("Col",[n("Card",[n("Row",{staticClass:"operation"},[n("Button",{attrs:{icon:"md-trash"},on:{click:e.delAll}},[e._v("批量删除")]),e.operationLoading?n("circleLoading"):e._e()],1),n("Row",[n("Alert",{attrs:{"show-icon":""}},[e._v("\n            已选择\n            "),n("span",{staticClass:"select-count"},[e._v(e._s(e.selectCount))]),e._v(" 项\n            "),n("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v("清空")])])],1),n("Row",[n("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,sortable:"custom"},on:{"on-selection-change":e.showSelect}})],1),n("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[n("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)],1)],1),n("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:500,styles:{top:"30px"}},model:{value:e.userModalVisible,callback:function(t){e.userModalVisible=t},expression:"userModalVisible"}},[n("Form",{ref:"userForm",attrs:{model:e.userForm,"label-width":70,rules:e.userFormValidate}},[n("FormItem",{attrs:{label:"用户名",prop:"userName"}},[n("Input",{attrs:{autocomplete:"off"},model:{value:e.userForm.userName,callback:function(t){e.$set(e.userForm,"userName",t)},expression:"userForm.userName"}})],1),n("FormItem",{attrs:{label:"姓名",prop:"nickName"}},[n("Input",{attrs:{autocomplete:"off"},model:{value:e.userForm.nickName,callback:function(t){e.$set(e.userForm,"nickName",t)},expression:"userForm.nickName"}})],1),n("FormItem",{attrs:{label:"邮箱",prop:"email"}},[n("Input",{model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),n("Form-item",{attrs:{label:"所属部门"}},[n("department-tree-choose",{ref:"depTree",attrs:{width:"285px"},on:{"on-change":e.handleSelectDepTree}})],1),n("FormItem",{attrs:{label:"用户类型",prop:"type"}},[n("Select",{attrs:{placeholder:"请选择"},model:{value:e.userForm.type,callback:function(t){e.$set(e.userForm,"type",t)},expression:"userForm.type"}},[n("Option",{attrs:{value:0}},[e._v("普通用户")]),n("Option",{attrs:{value:1}},[e._v("管理员")])],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:e.cancelUser}},[e._v("取消")]),n("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.submitUser}},[e._v("提交")])],1)],1)],1)},a=[],i=n("365c"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Cascader",{style:{width:e.width},attrs:{data:e.department,"load-data":e.loadData,"change-on-select":"",filterable:"",clearable:"",placeholder:"请选择或输入搜索部门"},on:{"on-change":e.handleChangeDep},model:{value:e.selectDep,callback:function(t){e.selectDep=t},expression:"selectDep"}})],1)},o=[],c={name:"departmentChoose",props:{width:{type:String,default:"200px"}},data:function(){return{selectDep:[],department:[]}},methods:{initDepartmentData:function(){var e=this;Object(i["s"])().then(function(t){1===t.code&&(t.data.forEach(function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1===e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)}),e.department=t.data)})},loadData:function(e,t){e.loading=!0,Object(i["u"])(e.value).then(function(n){e.loading=!1,1===n.code&&(n.data.forEach(function(e){e.isParent?(e.value=e.id,e.label=e.title,e.loading=!1,e.children=[]):(e.value=e.id,e.label=e.title),-1===e.status&&(e.label="[已禁用] "+e.label,e.disabled=!0)}),e.children=n.data,t())})},handleChangeDep:function(e,t){var n="";e&&e.length>0&&(n=e[e.length-1]),this.$emit("on-select",n)},clearSelect:function(){this.selectDep=[]}},created:function(){this.initDepartmentData()}},l=c,u=n("17cc"),d=Object(u["a"])(l,s,o,!1,null,null,null),h=d.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Poptip",{attrs:{trigger:"click",placement:"right",title:"选择部门",width:"250"}},[n("div",{staticStyle:{display:"flex"}},[n("Input",{staticStyle:{"margin-right":"10px"},style:{width:e.width},attrs:{readonly:"",placeholder:e.placeholder},model:{value:e.departmentTitle,callback:function(t){e.departmentTitle=t},expression:"departmentTitle"}}),n("Button",{attrs:{icon:"md-trash"},on:{click:e.clearSelect}},[e._v("清空已选")])],1),n("div",{staticClass:"tree-bar",attrs:{slot:"content"},slot:"content"},[n("Input",{attrs:{suffix:"ios-search",placeholder:"输入部门名搜索",clearable:""},on:{"on-change":e.searchDep},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),n("Tree",{attrs:{data:e.dataDep,"load-data":e.loadData,multiple:e.multiple},on:{"on-select-change":e.selectTree}}),e.depLoading?n("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)])],1)},p=[],f={name:"departmentTreeChoose",props:{multiple:{type:Boolean,default:!1},width:{type:String,default:"200px"},placeholder:{type:String,default:"点击选择部门"}},data:function(){return{depLoading:!1,departmentTitle:"",searchKey:"",dataDep:[],selectDep:[],department:[]}},methods:{initDepartmentData:function(){var e=this;Object(i["s"])().then(function(t){1===t.code&&(t.data.forEach(function(e){e.isParent&&(e.loading=!1,e.children=[]),-1===e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)}),e.dataDep=t.data)})},loadData:function(e,t){Object(i["u"])(e.id).then(function(e){1===e.code&&(e.data.forEach(function(e){e.isParent&&(e.loading=!1,e.children=[]),-1===e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)}),t(e.data))})},searchDep:function(){var e=this;this.searchKey?(this.depLoading=!0,Object(i["z"])({title:this.searchKey}).then(function(t){e.depLoading=!1,1===t.code&&(t.data.forEach(function(e){-1===e.status&&(e.title="[已禁用] "+e.title,e.disabled=!0)}),e.dataDep=t.data)})):this.initDepartmentData()},selectTree:function(e){var t=[],n="";e.forEach(function(e){t.push(e.id),n=""==n?e.title:n+"、"+e.title}),this.departmentId=t,this.departmentTitle=n,this.$emit("on-change",this.departmentId)},clearSelect:function(){this.departmentId=[],this.departmentTitle="",this.initDepartmentData(),this.$emit("on-change",this.departmentId)},setSelectDep:function(e,t){this.departmentId=e,this.departmentTitle=t,this.$emit("on-change",this.departmentId)}},created:function(){this.initDepartmentData()}},g=f,b=(n("e5ff"),Object(u["a"])(g,m,p,!1,null,null,null)),y=b.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"inline-block"}},[n("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"18",color:"#2d8cf0"}})],1)},F=[],O={name:"circleLoading"},D=O,w=(n("8364"),Object(u["a"])(D,v,F,!1,null,null,null)),j=w.exports,k={name:"user-manage",components:{circleLoading:j,departmentChoose:h,departmentTreeChoose:y},data:function(){var e=this;return{loading:!0,operationLoading:!1,selectCount:0,selectList:[],dataDep:[],searchKey:"",searchForm:{userName:"",departmentId:"",email:"",type:"",status:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc",startDate:"",endDate:""},selectDate:null,modalType:0,userModalVisible:!1,modalTitle:"",userForm:{userName:"",nickName:"",email:"",type:0,avatar:"",roles:[],departmentId:"",departmentTitle:""},userRoles:[],roleList:[],errorPass:"",userFormValidate:{userName:[{required:!0,message:"账号不能为空",trigger:"blur"}]},submitLoading:!1,columns:[{type:"selection",width:60,align:"center",fixed:"left"},{type:"index",width:60,align:"center",fixed:"left"},{title:"用户名",key:"userName",minWidth:145,sortable:!0,fixed:"left"},{title:"姓名",key:"nickName",minWidth:145,sortable:!0},{title:"头像",key:"avatar",width:80,align:"center",render:function(e,t){return e("Avatar",{props:{src:t.row.avatar}})}},{title:"所属部门",key:"departmentTitle",width:120},{title:"邮箱",key:"email",width:180,sortable:!0},{title:"用户类型",key:"type",align:"center",width:100,render:function(e,t){var n="";return n=1===t.row.type?"管理员":"普通用户",e("div",n)}},{title:"状态",key:"status",align:"center",width:140,render:function(e,t){return 0===t.row.status?e("div",[e("Tag",{props:{type:"dot",color:"success"}},"正常启用")]):-1===t.row.status?e("div",[e("Tag",{props:{type:"dot",color:"error"}},"禁用")]):void 0},filters:[{label:"正常启用",value:0},{label:"禁用",value:-1}],filterMultiple:!1,filterMethod:function(e,t){return 0===e?0===t.status:-1===e?-1===t.status:void 0}},{title:"创建时间",key:"createdAt",sortable:!0,sortType:"desc",width:150},{title:"操作",key:"action",width:200,align:"center",fixed:"right",render:function(t,n){var r="";return r=0==n.row.status?t("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){e.disable(n.row)}}},"禁用"):t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.enable(n.row)}}},"启用"),t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.edit(n.row)}}},"编辑"),r,t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(n.row)}}},"删除")])}}],data:[],total:0}},methods:{init:function(){this.getUserList()},handleSelectDepTree:function(e){this.userForm.departmentId=e[0]},handleSelectDep:function(e){this.searchForm.departmentId=e},changePage:function(e){this.searchForm.pageNumber=e,this.getUserList(),this.clearSelectAll()},changePageSize:function(e){this.searchForm.pageSize=e,this.getUserList()},selectDateRange:function(e){e&&(this.searchForm.startDate=e[0],this.searchForm.endDate=e[1])},getUserList:function(){var e=this;this.loading=!0,this.searchForm.type||(this.searchForm.type=""),this.searchForm.status||(this.searchForm.status=""),Object(i["r"])(this.searchForm).then(function(t){e.loading=!1,1===t.code&&(e.data=t.data.content,e.total=t.data.totalElements)})},handleSearch:function(){this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.getUserList()},handleReset:function(){this.$refs.searchForm.resetFields(),this.searchForm.pageNumber=1,this.searchForm.pageSize=10,this.selectDate=null,this.searchForm.startDate="",this.searchForm.endDate="",this.selectDep=[],this.searchForm.departmentId="",this.getUserList()},cancelUser:function(){this.userModalVisible=!1},submitUser:function(){var e=this;this.$refs.userForm.validate(function(t){t&&(e.submitLoading=!0,Object(i["i"])(e.userForm).then(function(t){e.submitLoading=!1,1===t.code&&(e.$Message.success("操作成功"),e.getUserList(),e.userModalVisible=!1)}))})},handleUpload:function(e){this.userForm.avatar=e},edit:function(e){for(var t in this.modalType=1,this.modalTitle="编辑用户",this.$refs.userForm.resetFields(),e)null===e[t]&&(e[t]="");var n=JSON.stringify(e),r=JSON.parse(n);this.userForm=r,this.$refs.depTree.setSelectDep([r.departmentId],r.departmentTitle),this.userModalVisible=!0},enable:function(e){var t=this;this.$Modal.confirm({title:"确认启用",content:"您确认要启用用户 "+e.userName+" ?",onOk:function(){t.operationLoading=!0,Object(i["j"])(e.userId).then(function(e){t.operationLoading=!1,1===e.code&&(t.$Message.success("操作成功"),t.getUserList())})}})},disable:function(e){var t=this;this.$Modal.confirm({title:"确认禁用",content:"您确认要禁用用户 "+e.userName+" ?",onOk:function(){t.operationLoading=!0,console.log(e),Object(i["f"])(e.userId).then(function(e){t.operationLoading=!1,1===e.code&&(t.$Message.success("操作成功"),t.getUserList())})}})},remove:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除用户 "+e.userName+" ?",onOk:function(){t.operationLoading=!0,Object(i["e"])(e.userId).then(function(e){t.operationLoading=!1,1===e.code&&(t.$Message.success("删除成功"),t.getUserList())})}})},showSelect:function(e){this.exportData=e,this.selectList=e,this.selectCount=e.length},clearSelectAll:function(){this.$refs.table.selectAll(!1)},delAll:function(){var e=this;this.selectCount<=0?this.$Message.warning("您还未选择要删除的数据"):this.$Modal.confirm({title:"确认删除",content:"您确认要删除所选的 "+this.selectCount+" 条数据?",onOk:function(){var t="";e.selectList.forEach(function(e){t+=e.id+","}),t=t.substring(0,t.length-1),e.operationLoading=!0,Object(i["e"])(t).then(function(t){e.operationLoading=!1,!0===t.success&&(e.$Message.success("删除成功"),e.clearSelectAll(),e.getUserList())})}})}},mounted:function(){this.init()}},L=k,S=(n("df2b"),Object(u["a"])(L,r,a,!1,null,null,null));t["default"]=S.exports},8364:function(e,t,n){"use strict";var r=n("e55a"),a=n.n(r);a.a},df2b:function(e,t,n){"use strict";var r=n("08f3"),a=n.n(r);a.a},e55a:function(e,t,n){},e5ff:function(e,t,n){"use strict";var r=n("13ca"),a=n.n(r);a.a}}]);